<!-- Project 8: Build a ToDo App

Requirements:
-Create a Github repository for this project.
-A user must be able to add and delete a todo item, from the UI and from your storage.
-Save each todo item as an object, with a key for the todo text and an "id" key that represents a random number you can use to search it by. So, you should have an array of objects that you're saving in localStorage.
-Hint: use JavaScript localStorage to store the todos.
-Hint: To convert an array into the string representation, you'll need JSON stringify. To convert it back to an array, you'll need JSON parse.
-Send me the project for review and get started on the next project.

You can store your Todos in an array, but keep in mind that localStorage can only store strings, so that means you'll have to convert your array of todos into a string before you can store it. And when you retrieve it, you have to convert it from a string back to an array. Those are all things you can do with JavaScript, so make sure to look those up.

Also, you can use JavaScript to add an "onclick" attribute to elements you're using JavaScript to create. This may be of note when thinking of how to delete the todo element. -->

<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8"> <!-- BOOTSTRAP -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> <!-- JAVASCRIPT -->
  <title>ToDo App</title>
</head>

<body>
  <div class="container-fluid m-3">
    <div class="row">
      <h3 class="display-4">ToDo</h3>
    </div>
    <div class="row">
      <div class="col-sm-2">
        <input type="text" id="item" class="mb-1">
        <button class="btn-primary btn-sm" onclick="addItem()">Add item</button>
      </div>
      <div class="col-sm-2">
        <h5 class="text-muted">Items</h5>
        <ul id="list-items"></ul>
        <button class="btn-danger btn-sm" onclick="removeItem()">Remove item</button>
      </div>
    </div>
  </div>

  <script>
    // localStorage.clear();

    let list = JSON.parse(localStorage.getItem('list')) || [];
    let listOfItems = document.getElementById("list-items");

    const renderList = (list) => {
      list.map(({text, id}) => {
        let listOfItems = document.getElementById("list-items");
        let li = document.createElement("li");
        let deleteBox = document.createElement("input");

        deleteBox.type = "checkbox";
        deleteBox.className = "mx-1 delete-box form-check-input";
        li.setAttribute("id", id);
        li.className = "item";
        li.appendChild(document.createTextNode(text));
        li.appendChild(deleteBox);
        listOfItems.appendChild(li);
      })
    }

    renderList(list);

    function printToList(text) {
      let listOfItems = document.getElementById("list-items");
      let li = document.createElement("li");
      let deleteBox = document.createElement("input");

      deleteBox.type = "checkbox";
      deleteBox.className = "delete-box form-check-input";
      // li.setAttribute("id", id);
      li.className = "item";
      li.appendChild(document.createTextNode(text));
      li.appendChild(deleteBox);
      listOfItems.appendChild(li);
    }

    function addItem() {
      let inputValue = document.getElementById("item").value;
      let inputId = Date.now();

      if (inputValue === "") {
        alert("Enter a text item to add to the list.");
        return false;
      } else {
        list.push({text: inputValue, id: inputId});
        localStorage.setItem("list", JSON.stringify(list));
        }

      printToList(inputValue);
      document.getElementById("item").value = "";
    }


    function removeItem() {
      let checkboxes = document.getElementsByClassName("delete-box");
      let items = document.getElementsByClassName("item");

      for (let i = 0; i < checkboxes.length; i++) {
        if (checkboxes[i].checked) {
          checkboxes[i].parentNode.removeChild(checkboxes[i]);
          items[i].parentNode.removeChild(items[i]);
          list.splice([i], 1);
          localStorage.setItem("list", JSON.stringify(list));
        }
      }
    }

  </script>
</body>

</html>
